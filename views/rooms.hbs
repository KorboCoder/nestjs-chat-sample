
<html>
    <head>
<script src="https://unpkg.com/htmx.org@1.9.5" integrity="sha384-xcuj3WpfgjlKF+FXhSQFQ0ZNr39ln+hwjN3npfM9VBnUskLolQAcN80McRIVOPuO" crossorigin="anonymous"></script>
    </head>
<style>
      body { margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
      #room-select { margin: 0; padding: 0; flex-grow: 0}
      #options-parent { list-style-type: none; display:flex; padding: 0px; margin: 0px; }
      button { background: #333; border: none; padding: 2px 0.25rem; margin: 0.1rem; border-radius: 3px; outline: none; color: #fff; }
</style>
    <body>
        <div>
            <select id="room-select" name="room" size="10">
                {{#each rooms}}
                <option value="{{this}}"> {{this}} </option>
                {{/each}}
            </select>
            <ul id="options-parent">
                <li>
                    <form id="create-room-form">
                        <input id="room-id" autocomplete="off" /><button>Create</button>
                    </form>
                </li>
                <li>
                    <button id="join-room-button"> Join </button>
                </li>
            </ul>
        </div>
        <script>
            let joinRoomButton = document.getElementById('join-room-button')
            let createRoomForm = document.getElementById('create-room-form')
            let roomSelect = document.getElementById('room-select')
            let roomIdInput = document.getElementById('room-id')

            createRoomForm.addEventListener('submit', (e) => {
                e.preventDefault()
                if (roomIdInput.value) {
                    window.location.href = '/chat/rooms/' + roomIdInput.value
                }
            })
            joinRoomButton.addEventListener('click', () => {
                let selectedRoom = roomSelect.options[roomSelect.selectedIndex].value
                if(selectedRoom) {
                    window.location.href = '/chat/rooms/' + selectedRoom
                }
            })
        </script>
        

    </body>
</html>

